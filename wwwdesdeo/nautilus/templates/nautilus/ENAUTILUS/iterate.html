<!-- Show the intermediate and final results. Allow the DM to make appropiate
     choices between each iteration. -->
{% extends "../base.html" %}

<!-- Display the header with the current iteration and total iterations -->
{% block header %}
{{ title|default:"title" }}({{ current_iteration|default:"cur iter" }}/{{ total_iterations|default:"tot iter" }})
{% endblock %}

<!-- Display the results of the iteration -->
{% block body %}
<div id="show-div">
  {% if results %}
  <table>
    {% for key, value in results.items %}
    <tr>
      <th>{{ key }}</th>
    </tr>
    {% for entry in value %}
    <tr>
      <td>{{ forloop.counter0 }}</td>
      <td>{{ entry }}</td>
    </tr>
    {% endfor %}
    {% endfor %}
  </table>
  {% else %}
  {{ visualization |safe}}
  {% block scripts %}
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  {% endblock %}
  {% endif %}
</div>

<!-- Ask for preference -->
<div id="input-div">
{% if forms %}
<h2>Decisions</h2>
{% for key, value in forms.items %}
<h3>{{ key }}</h3>
<form action="" method="post">
  <div id="input-div">
    {% csrf_token %}
    {{ value }}
    {% endfor %}
    <input type="submit" value="Submit">
  </div>
</form>
{% endif %}
</div>
{% endblock %}

